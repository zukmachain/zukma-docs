
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="icon" href="../../assets/favicon.png">
      <meta name="generator" content="mkdocs-1.3.1, mkdocs-material-8.4.4">
    
    
      
        <title>Validator Monitoring - Zukma Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.6b80c2a2.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.cbb835fc.min.css">
        
      
      
    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Nunito:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Nunito";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#how-to-visualize-node-metrics" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Zukma Documentation" class="md-header__button md-logo" aria-label="Zukma Documentation" data-md-component="logo">
      
  <img src="../../assets/zukma-gradient.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Zukma Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Validator Monitoring
            
          </span>
        </div>
      </div>
    </div>
    
    
      <div class="md-header__option">
        <div class="md-select">
          
          <button class="md-header__button md-icon" aria-label="Select language">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m12.87 15.07-2.54-2.51.03-.03A17.52 17.52 0 0 0 14.07 6H17V4h-7V2H8v2H1v2h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04M18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12m-2.62 7 1.62-4.33L19.12 17h-3.24Z"/></svg>
          </button>
          <div class="md-select__inner">
            <ul class="md-select__list">
              
                <li class="md-select__item">
                  <a href="../.." hreflang="en" class="md-select__link">
                    English
                  </a>
                </li>
                
            </ul>
          </div>
        </div>
      </div>
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/zukmachain/zukma-documentation" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        Home
      </a>
    </li>
  

      
        
  
  


  <li class="md-tabs__item">
    <a href="../../credits/" class="md-tabs__link">
      Credits
    </a>
  </li>

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../get-started/" class="md-tabs__link">
        Get Started
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../what-to-try/account-generation/" class="md-tabs__link">
        What to Try?
      </a>
    </li>
  

      
        
  
  
    
  


  
  
  
    <li class="md-tabs__item">
      <a href="../validator/" class="md-tabs__link md-tabs__link--active">
        Validator Guides
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../troubleshooting/01-substrate-error-codes/" class="md-tabs__link">
        Troubleshooting
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../dev-guides/" class="md-tabs__link">
        Developer Guides
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../deep-dives/evm-pallet/" class="md-tabs__link">
        Deep Dives
      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Zukma Documentation" class="md-nav__button md-logo" aria-label="Zukma Documentation" data-md-component="logo">
      
  <img src="../../assets/zukma-gradient.png" alt="logo">

    </a>
    Zukma Documentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/zukmachain/zukma-documentation" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1" type="checkbox" id="__nav_1" >
      
      
      
        
          
            
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../..">Home</a>
          
            <label for="__nav_1">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="Home" data-md-level="1">
        <label class="md-nav__title" for="__nav_1">
          <span class="md-nav__icon md-icon"></span>
          Home
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../home/quick-start/" class="md-nav__link">
        Quick Start
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../home/FAQs/" class="md-nav__link">
        FAQs
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../credits/" class="md-nav__link">
        Credits
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      
      
        
          
            
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../get-started/">Get Started</a>
          
            <label for="__nav_3">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="Get Started" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Get Started
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../get-started/faucet/" class="md-nav__link">
        Faucet
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../get-started/claims/" class="md-nav__link">
        Claims
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../get-started/internal-transfer/" class="md-nav__link">
        EVM <-> Substrate Transfers
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../get-started/endpoints/" class="md-nav__link">
        Endpoints
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../get-started/transfer-balances/" class="md-nav__link">
        Transfer Balances
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      
      
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_4">
          What to Try?
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="What to Try?" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          What to Try?
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../what-to-try/account-generation/" class="md-nav__link">
        Create an Account
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../what-to-try/nominator/" class="md-nav__link">
        Become a Nominator
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../what-to-try/identity/" class="md-nav__link">
        Set an Identity
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../what-to-try/democracy/" class="md-nav__link">
        Explore the Governance
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../what-to-try/treasury/" class="md-nav__link">
        Use the Treasury
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" checked>
      
      
      
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_5">
          Validator Guides
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Validator Guides" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Validator Guides
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../validator/" class="md-nav__link">
        Become a Validator
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Validator Monitoring
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Validator Monitoring
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#example-monitoring-architecture" class="md-nav__link">
    Example Monitoring Architecture
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-1-install-prometheus-and-grafana" class="md-nav__link">
    Step 1 - Install Prometheus and Grafana
  </a>
  
    <nav class="md-nav" aria-label="Step 1 - Install Prometheus and Grafana">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#install-and-configure-prometheus" class="md-nav__link">
    Install and Configure Prometheus
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configure-prometheus" class="md-nav__link">
    Configure Prometheus
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#start-prometheus" class="md-nav__link">
    Start Prometheus
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-2-install-node-exporter" class="md-nav__link">
    Step 2 - Install Node Exporter
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-3-install-alert-manager" class="md-nav__link">
    Step 3 - Install Alert Manager
  </a>
  
    <nav class="md-nav" aria-label="Step 3 - Install Alert Manager">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#gmail-setup" class="md-nav__link">
    Gmail Setup
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#alert-manager-configuration" class="md-nav__link">
    Alert Manager Configuration
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-4-install-grafana" class="md-nav__link">
    Step 4 - Install Grafana
  </a>
  
    <nav class="md-nav" aria-label="Step 4 - Install Grafana">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lets-us-wire-it-all-together" class="md-nav__link">
    Let's us wire it all together
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lets-use-our-zukma-template-dashboard" class="md-nav__link">
    Let's use our Zukma Template Dashboard
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../account-generation/" class="md-nav__link">
        Create an Account
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../validator-payout-overview/" class="md-nav__link">
        Validator Payout Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../secure-validator/" class="md-nav__link">
        Secure your Validator
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../change-vps-provider/" class="md-nav__link">
        Change VPS Provider
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../update-binaries/" class="md-nav__link">
        Update Binaries
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../stop-validating/" class="md-nav__link">
        Stop Validating
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6" type="checkbox" id="__nav_6" >
      
      
      
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_6">
          Troubleshooting
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Troubleshooting" data-md-level="1">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          Troubleshooting
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../troubleshooting/01-substrate-error-codes/" class="md-nav__link">
        Resolve Errors
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../troubleshooting/02-Glossary/" class="md-nav__link">
        Glossary
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7" type="checkbox" id="__nav_7" >
      
      
      
        
          
            
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../dev-guides/">Developer Guides</a>
          
            <label for="__nav_7">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="Developer Guides" data-md-level="1">
        <label class="md-nav__title" for="__nav_7">
          <span class="md-nav__icon md-icon"></span>
          Developer Guides
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_2" type="checkbox" id="__nav_7_2" >
      
      
      
        
          
            
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../dev-guides/Tutorials/">Tutorials</a>
          
            <label for="__nav_7_2">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="Tutorials" data-md-level="2">
        <label class="md-nav__title" for="__nav_7_2">
          <span class="md-nav__icon md-icon"></span>
          Tutorials
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_2_2" type="checkbox" id="__nav_7_2_2" >
      
      
      
        
          
            
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../dev-guides/Tutorials/evm-tutorial/">EVM Tutorial</a>
          
            <label for="__nav_7_2_2">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="EVM Tutorial" data-md-level="3">
        <label class="md-nav__title" for="__nav_7_2_2">
          <span class="md-nav__icon md-icon"></span>
          EVM Tutorial
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_2_2_2" type="checkbox" id="__nav_7_2_2_2" >
      
      
      
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_7_2_2_2">
          Tools and Resources
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Tools and Resources" data-md-level="4">
        <label class="md-nav__title" for="__nav_7_2_2_2">
          <span class="md-nav__icon md-icon"></span>
          Tools and Resources
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../dev-guides/Tutorials/evm-tutorial/evm-tools-and-res/eth-libs/" class="md-nav__link">
        Libraries
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../dev-guides/Tutorials/evm-tutorial/evm-tools-and-res/waffle/" class="md-nav__link">
        Tools
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../dev-guides/Tutorials/evm-tutorial/evm-tools-and-res/evm-balances/" class="md-nav__link">
        EVM Balances
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_2_2_3" type="checkbox" id="__nav_7_2_2_3" >
      
      
      
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_7_2_2_3">
          Guides
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Guides" data-md-level="4">
        <label class="md-nav__title" for="__nav_7_2_2_3">
          <span class="md-nav__icon md-icon"></span>
          Guides
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../dev-guides/Tutorials/evm-tutorial/Tutorial/using-mm/" class="md-nav__link">
        Connect to Zukma
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../dev-guides/Tutorials/evm-tutorial/Tutorial/using-truffle/" class="md-nav__link">
        Deploy with Truffle
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_8" type="checkbox" id="__nav_8" >
      
      
      
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_8">
          Deep Dives
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Deep Dives" data-md-level="1">
        <label class="md-nav__title" for="__nav_8">
          <span class="md-nav__icon md-icon"></span>
          Deep Dives
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../deep-dives/evm-pallet/" class="md-nav__link">
        EVM Pallet
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../deep-dives/substrate_keys/" class="md-nav__link">
        Keys
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../deep-dives/Using-Web3js/" class="md-nav__link">
        Using Web3.js
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../deep-dives/staking/" class="md-nav__link">
        Staking
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../deep-dives/bridges/" class="md-nav__link">
        Bridges
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                

  <a href="https://github.com/zukmachain/zukma-documentation/edit/master/docs/validator-guides/node-monitoring.md" title="Edit this page" class="md-content__button md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"/></svg>
  </a>


<h1 id="how-to-visualize-node-metrics"><b>HOW TO VISUALIZE NODE METRICS</b></h1>
<hr />
<p><img alt="img" src="../assets/dashboard.png#center" /></p>
<p>This guide will teach you how to use Prometheus and Grafana to implement a basic validator monitoring. 
We can do this because every Zukma node exposes metrics such as the chain height, number of connected peers or the amount of memory used on a Prometheus metric endpoint. </p>
<p>We will use <a href="https://prometheus.io/" target="_blank"> Prometheus</a> to collect the data and <a href="https://grafana.com/" target="_blank"> Grafana</a> to visualize them on a nice looking dashboard.</p>
<h2 id="example-monitoring-architecture"><strong>Example Monitoring Architecture</strong></h2>
<hr />
<div class="highlight"><pre><span></span><code>+--------------+                  +-------------+                                                              +---------+
| Zukma Node |                  | Prometheus  |                                                              | Grafana |
+--------------+                  +-------------+                                                              +---------+
      |               -----------------\ |                                                                          |
      |               | Every 1 minute |-|                                                                          |
      |               |----------------| |                                                                          |
      |                                  |                                                                          |
      |        GET current metric values |                                                                          |
      |&lt;---------------------------------|                                                                          |
      |                                  |                                                                          |
      | `substrate_peers_count 5`        |                                                                          |
      |---------------------------------&gt;|                                                                          |
      |                                  | --------------------------------------------------------------------\    |
      |                                  |-| Save metric value with corresponding time stamp in local database |    |
      |                                  | |-------------------------------------------------------------------|    |
      |                                  |                                         -------------------------------\ |
      |                                  |                                         | Every time user opens graphs |-|
      |                                  |                                         |------------------------------| |
      |                                  |                                                                          |
      |                                  |       GET values of metric `substrate_peers_count` from time-X to time-Y |
      |                                  |&lt;-------------------------------------------------------------------------|
      |                                  |                                                                          |
      |                                  | `substrate_peers_count (1582023828, 5), (1582023847, 4) [...]`           |
      |                                  |-------------------------------------------------------------------------&gt;|
      |                                  |                                                                          |
</code></pre></div>
<h2 id="step-1-install-prometheus-and-grafana"><strong>Step 1 - Install Prometheus and Grafana</strong></h2>
<hr />
<p>To protect our node we will create a user for Prometheus but not allow Prometheus to log-in itself. 
We will then create the directories required to store the Prometheus config and executable file and then change the ownership of these directories to the Prometheus user so that only Prometheus can access them.</p>
<p>Create Prometheus User:
<div class="highlight"><pre><span></span><code>sudo useradd --no-create-home --shell /usr/sbin/nologin prometheus
</code></pre></div></p>
<p>Create the directories required to store the configuration and executable files:
<div class="highlight"><pre><span></span><code>sudo mkdir /etc/prometheus
sudo mkdir /var/lib/prometheus
</code></pre></div></p>
<p>Change the ownership of these directories to <code>prometheus</code>:
<div class="highlight"><pre><span></span><code>sudo chown -R prometheus:prometheus /etc/prometheus
sudo chown -R prometheus:prometheus /var/lib/prometheus
</code></pre></div></p>
<h3 id="install-and-configure-prometheus"><strong> Install and Configure Prometheus</strong></h3>
<hr />
<p>After setting up the environment, update your OS, and install the latest Prometheus. You can check the latest release by visiting their <a href="https://prometheus.io/download/" target="_blank"> downloads</a> page.</p>
<div class="highlight"><pre><span></span><code>sudo apt-get update &amp;&amp; apt-get upgrade
wget https://github.com/prometheus/prometheus/releases/download/v2.33.5/prometheus-2.33.5.linux-amd64.tar.gz
tar xfz prometheus-*.tar.gz
</code></pre></div>
<p>Let's inspect the unzipped file we downloaded by changing directories:
<div class="highlight"><pre><span></span><code>cd prometheus-2.33.5.linux-amd64
</code></pre></div></p>
<p>The following two binaries are in the directory:</p>
<ul>
<li>prometheus -&gt; Prometheus main binary file</li>
<li>promtool</li>
</ul>
<p>The following two directories (which contain the web interface, configuration files examples and the license) are in the directory:</p>
<ul>
<li>console</li>
<li>console_libraries</li>
</ul>
<p>We want to copy the downloaded bin files and move it to our local folder for bin files <code>/usr/local/bin/</code></p>
<div class="highlight"><pre><span></span><code>sudo cp ./prometheus /usr/local/bin/
sudo cp ./promtool /usr/local/bin/
</code></pre></div>
<p>We also want to change the ownership of those file to our Prometheus user:</p>
<div class="highlight"><pre><span></span><code>sudo chown prometheus:prometheus /usr/local/bin/prometheus
sudo chown prometheus:prometheus /usr/local/bin/promtool
</code></pre></div>
<p>We also want to copy and move the <code>consoles</code> and <code>console_libraries</code> folders into our local folder <code>/etc/prometheus</code></p>
<div class="highlight"><pre><span></span><code>sudo cp -r ./consoles /etc/prometheus
sudo cp -r ./console_libraries /etc/prometheus
</code></pre></div>
<p>We again want to change the ownership to our Prometheus user:</p>
<div class="highlight"><pre><span></span><code>sudo chown -R prometheus:prometheus /etc/prometheus/consoles
sudo chown -R prometheus:prometheus /etc/prometheus/console_libraries
</code></pre></div>
<div class="admonition success">
<p class="admonition-title">Success</p>
<p>Now we successfully moved all folders and binaries of the downloaded folder into the correct local folders and changed their ownership to our Prometheus user.</p>
</div>
<p>Now we can safely delete the downloaded folder:
<div class="highlight"><pre><span></span><code>cd .. &amp;&amp; rm -rf prometheus*
</code></pre></div></p>
<h3 id="configure-prometheus"><strong>Configure Prometheus</strong></h3>
<p>Before Prometheus can be started, it needs some configuration. We will manage the configuration in a <code>.yml</code> file which we will create now:</p>
<div class="highlight"><pre><span></span><code>sudo nano /etc/prometheus/prometheus.yml
</code></pre></div>
<p>The config file is divided into three parts:</p>
<ol>
<li><code>global</code></li>
<li><code>rule_files</code></li>
<li>
<p><code>scrape_configs</code></p>
</li>
<li>
<p><code>scrape_interval</code> defines how often Prometheus scrapes targets, while evaluation_interval controls how often the software will evaluate rules.</p>
</li>
<li><code>rule files</code> block contains information of the location of any rules we want the Prometheus server to load.</li>
<li><code>scrape_configs</code> contains the information which resources Prometheus monitors.</li>
</ol>
<p>Configure the file as following:</p>
<div class="highlight"><pre><span></span><code>global:
  scrape_interval: 15s
  evaluation_interval: 15s

rule_files:
  # - &quot;first.rules&quot;
  # - &quot;second.rules&quot;

scrape_configs:
  - job_name: &quot;prometheus&quot;
    scrape_interval: 5s
    static_configs:
      - targets: [&quot;localhost:9090&quot;]
  - job_name: &quot;Zukma_Node&quot;
    scrape_interval: 5s
    static_configs:
      - targets: [&quot;localhost:9615&quot;]
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Prometheus can manage multiple jobs. We currently have two jobs (Prometheus and Zukma_Node) and both are listening on localhost ports. 
You can also change the target address to an IP address of another node if you want to centralize all the data. </p>
</div>
<p>With the above configuration file, the first exporter is the one that Prometheus exports to monitor itself. As we want to have more precise information about the state of the Prometheus server we reduced the scrape_interval to 5 seconds for this job. The parameters static_configs and targets determine where the exporters are running. The second exporter is capturing the data from our node, and the port by default is 9615.</p>
<p>Let' check the validity of the configuration file by running </p>
<div class="highlight"><pre><span></span><code>sudo chown prometheus:prometheus /etc/prometheus/prometheus.yml
</code></pre></div>
<p>And let's change the ownership of the config file to our Prometheus user:</p>
<div class="highlight"><pre><span></span><code>sudo chown prometheus:prometheus /etc/prometheus/prometheus.yml
</code></pre></div>
<h3 id="start-prometheus"><strong>Start Prometheus</strong></h3>
<p>Before we start Prometheus let's make sure that our firewall isn't blocking port 9090
<div class="highlight"><pre><span></span><code>ufw allow 9090
</code></pre></div></p>
<p>To test that Prometheus is set up properly we will execute a command to inspect the logs:
Remember, we need to run this command as the Prometheus user due to the ownership of the files:</p>
<div class="highlight"><pre><span></span><code>sudo -u prometheus /usr/local/bin/prometheus --config.file /etc/prometheus/prometheus.yml --storage.tsdb.path /var/lib/prometheus/ --web.console.templates=/etc/prometheus/consoles --web.console.libraries=/etc/prometheus/console_libraries
</code></pre></div>
<p>We should see a message like this:</p>
<div class="highlight"><pre><span></span><code>level=info ts=2021-04-16T19:02:20.167Z caller=main.go:380 msg=&quot;No time or size retention was set so using the default time retention&quot; duration=15d
level=info ts=2021-04-16T19:02:20.167Z caller=main.go:418 msg=&quot;Starting Prometheus&quot; version=&quot;(version=2.26.0, branch=HEAD, revision=3cafc58827d1ebd1a67749f88be4218f0bab3d8d)&quot;
level=info ts=2021-04-16T19:02:20.167Z caller=main.go:423 build_context=&quot;(go=go1.16.2, user=root@a67cafebe6d0, date=20210331-11:56:23)&quot;
level=info ts=2021-04-16T19:02:20.167Z caller=main.go:424 host_details=&quot;(Linux 5.4.0-42-generic #46-Ubuntu SMP Fri Jul 10 00:24:02 UTC 2020 x86_64 ubuntu2004 (none))&quot;
level=info ts=2021-04-16T19:02:20.167Z caller=main.go:425 fd_limits=&quot;(soft=1024, hard=1048576)&quot;
level=info ts=2021-04-16T19:02:20.167Z caller=main.go:426 vm_limits=&quot;(soft=unlimited, hard=unlimited)&quot;
level=info ts=2021-04-16T19:02:20.169Z caller=web.go:540 component=web msg=&quot;Start listening for connections&quot; address=0.0.0.0:9090
level=info ts=2021-04-16T19:02:20.170Z caller=main.go:795 msg=&quot;Starting TSDB ...&quot;
level=info ts=2021-04-16T19:02:20.171Z caller=tls_config.go:191 component=web msg=&quot;TLS is disabled.&quot; http2=false
level=info ts=2021-04-16T19:02:20.174Z caller=head.go:696 component=tsdb msg=&quot;Replaying on-disk memory mappable chunks if any&quot;
level=info ts=2021-04-16T19:02:20.175Z caller=head.go:710 component=tsdb msg=&quot;On-disk memory mappable chunks replay completed&quot; duration=1.391446ms
level=info ts=2021-04-16T19:02:20.175Z caller=head.go:716 component=tsdb msg=&quot;Replaying WAL, this may take a while&quot;
level=info ts=2021-04-16T19:02:20.178Z caller=head.go:768 component=tsdb msg=&quot;WAL segment loaded&quot; segment=0 maxSegment=4
level=info ts=2021-04-16T19:02:20.193Z caller=head.go:768 component=tsdb msg=&quot;WAL segment loaded&quot; segment=1 maxSegment=4
level=info ts=2021-04-16T19:02:20.221Z caller=head.go:768 component=tsdb msg=&quot;WAL segment loaded&quot; segment=2 maxSegment=4
level=info ts=2021-04-16T19:02:20.224Z caller=head.go:768 component=tsdb msg=&quot;WAL segment loaded&quot; segment=3 maxSegment=4
level=info ts=2021-04-16T19:02:20.229Z caller=head.go:768 component=tsdb msg=&quot;WAL segment loaded&quot; segment=4 maxSegment=4
level=info ts=2021-04-16T19:02:20.229Z caller=head.go:773 component=tsdb msg=&quot;WAL replay completed&quot; checkpoint_replay_duration=43.716µs wal_replay_duration=53.973285ms total_replay_duration=55.445308ms
level=info ts=2021-04-16T19:02:20.233Z caller=main.go:815 fs_type=EXT4_SUPER_MAGIC
level=info ts=2021-04-16T19:02:20.233Z caller=main.go:818 msg=&quot;TSDB started&quot;
level=info ts=2021-04-16T19:02:20.233Z caller=main.go:944 msg=&quot;Loading configuration file&quot; filename=/etc/prometheus/prometheus.yml
level=info ts=2021-04-16T19:02:20.234Z caller=main.go:975 msg=&quot;Completed loading of configuration file&quot; filename=/etc/prometheus/prometheus.yml totalDuration=824.115µs remote_storage=3.131µs web_handler=401ns query_engine=1.056µs scrape=236.454µs scrape_sd=45.432µs notify=723ns notify_sd=2.61µs rules=956ns
level=info ts=2021-04-16T19:02:20.234Z caller=main.go:767 msg=&quot;Server is ready to receive web requests.&quot;
</code></pre></div>
<p>Now let's try to reach the graphical UI of our Prometheus server by opening the browser and opening the following URL:</p>
<div class="highlight"><pre><span></span><code>http://<mark class="critic">SERVER_IP_ADDRESS</mark>:9090/graph
</code></pre></div>
<p><img alt="img" src="../assets/prometheus_01.png#center" /></p>
<p>We can also quickly verify if our Zukma node gets scraped by visiting the <code>Status-&gt; Targets</code> page.</p>
<p><img alt="img" src="../assets/prometheus_02.png#center" /></p>
<p>If you can see it you can close the process on your VPS by hitting <span class="keys"><kbd class="key-control">Ctrl</kbd><span>+</span><kbd class="key-c">C</kbd></span></p>
<p>Now that everything is running we want to automatically start the server during the boot process, so we have to create a new <code>systemd</code> configuration file with the following config:</p>
<div class="highlight"><pre><span></span><code>sudo nano /etc/systemd/system/prometheus.service
</code></pre></div>
<div class="highlight"><pre><span></span><code>[Unit]
  Description=Prometheus Monitoring
  Wants=network-online.target
  After=network-online.target

[Service]
  User=prometheus
  Group=prometheus
  Type=simple
  ExecStart=/usr/local/bin/prometheus \
  --config.file /etc/prometheus/prometheus.yml \
  --storage.tsdb.path /var/lib/prometheus/ \
  --web.console.templates=/etc/prometheus/consoles \
  --web.console.libraries=/etc/prometheus/console_libraries
  ExecReload=/bin/kill -HUP $MAINPID

[Install]
  WantedBy=multi-user.target
</code></pre></div>
<p>After we saved the file, we want to reload <code>systemd</code> and enable the service so that it will be loaded automatically during the operating system's startup.</p>
<div class="highlight"><pre><span></span><code>sudo systemctl daemon-reload &amp;&amp; systemctl enable prometheus &amp;&amp; systemctl start prometheus
</code></pre></div>
<div class="admonition success">
<p class="admonition-title">Success</p>
<p>Prometheus should be running now, and we should be able to access its front-end again by re-visiting <code><mark class="critic">IP_ADDRESS</mark>:9090/</code>.</p>
</div>
<h2 id="step-2-install-node-exporter"><strong>Step 2 - Install Node Exporter</strong></h2>
<p>Now we will install Prometheus's Node Exporter module which exposes hardware metrics like CPU load, RAM and storage usage.</p>
<p>Create Node Exporter User
<div class="highlight"><pre><span></span><code>sudo useradd --no-create-home --shell /usr/sbin/nologin node_exporter
</code></pre></div>
Create the directories required to store the configuration and executable files:</p>
<div class="highlight"><pre><span></span><code>sudo mkdir /etc/node_exporter
sudo mkdir /var/lib/node_exporter
</code></pre></div>
<p>Change the ownership of those files to our <code>Node_Exporter</code> user</p>
<div class="highlight"><pre><span></span><code>sudo chown -R node_exporter:node_exporter /etc/node_exporter
sudo chown -R prometheus:node_exporter /var/lib/node_exporter
</code></pre></div>
<p>Install the latest version of Node Exporter from <a href="https://prometheus.io/download/#node_exporter" target="_blank"> downloads</a> page:</p>
<div class="highlight"><pre><span></span><code>wget https://github.com/prometheus/node_exporter/releases/download/v1.3.1/node_exporter-1.3.1.linux-amd64.tar.gz
tar xvfz node_exporter-*.*-amd64.tar.gz
</code></pre></div>
<p>Change directory into the downloaded file: 
<div class="highlight"><pre><span></span><code>cd node_exporter-*.*-amd64
</code></pre></div></p>
<p>Let's copy the binary <code>node_exporter</code> to our local binary folder <code>/usr/local/bin/</code></p>
<div class="highlight"><pre><span></span><code>sudo cp ./node_exporter /usr/local/bin/
</code></pre></div>
<p>Let's also change the ownership of the binary file:
<div class="highlight"><pre><span></span><code>sudo chown node_exporter:node_exporter /usr/local/bin/node_exporter
</code></pre></div></p>
<p>Now we can delete the downloaded node_exporter folder:
<div class="highlight"><pre><span></span><code>cd .. &amp;&amp; rm -rf node_exporter*
</code></pre></div></p>
<p>Since the <code>Node Exporter</code> will run on port 9100 we need to allow that port on our firewall</p>
<div class="highlight"><pre><span></span><code>ufw allow 9100
</code></pre></div>
<p>Let's test-run the node_exporter:</p>
<div class="highlight"><pre><span></span><code>cd /usr/local/bin
./node_exporter
</code></pre></div>
<p>We can now observe the exposed metrics in our browser at:</p>
<div class="highlight"><pre><span></span><code>http://<mark class="critic">SERVER_IP_ADDRESS</mark>:9100/metrics
</code></pre></div>
<p>After we confirmed that the <code>node_exporter</code> is running we can exit the process on our VPS by hitting <span class="keys"><kbd class="key-control">Ctrl</kbd><span>+</span><kbd class="key-c">C</kbd></span></p>
<p>Now that everything is running we want to automatically start the <code>node_exporter</code> during the boot process, so we have to create a new <code>systemd</code> configuration file with the following config:</p>
<div class="highlight"><pre><span></span><code>sudo nano /etc/systemd/system/node_exporter.service
</code></pre></div>
<div class="highlight"><pre><span></span><code>[Unit]
  Description=Node Exporter Monitoring
  Wants=network-online.target
  After=network-online.target

[Service]
  User=node_exporter
  Group=node_exporter
  Type=simple
  ExecStart=/usr/local/bin/node_exporter
  ExecReload=/bin/kill -HUP $MAINPID

[Install]
  WantedBy=multi-user.target
</code></pre></div>
<p>After we saved the file, we want to reload <code>systemd</code> and enable the service so that it will be loaded automatically during the operating system's startup.</p>
<div class="highlight"><pre><span></span><code>sudo systemctl daemon-reload &amp;&amp; systemctl enable node_exporter &amp;&amp; systemctl start node_exporter
</code></pre></div>
<p>Finally, we must tell our Prometheus server to scrape the metrics exposed by the <code>node_exporter</code>.
We do this by configuring the <code>prometheus.yml</code> file we created earlier.</p>
<div class="highlight"><pre><span></span><code>sudo nano /etc/prometheus/prometheus.yml
</code></pre></div>
<div class="highlight"><pre><span></span><code>global:
  scrape_interval: 15s
  evaluation_interval: 15s

rule_files:
  # - &quot;first.rules&quot;
  # - &quot;second.rules&quot;

scrape_configs:
  - job_name: &quot;prometheus&quot;
    scrape_interval: 5s
    static_configs:
      - targets: [&quot;localhost:9090&quot;]
  - job_name: &quot;Zukma_Node&quot;
    scrape_interval: 5s
    static_configs:
      - targets: [&quot;localhost:9615&quot;]
  - job_name: &quot;Node_Exporter&quot;
    scrape_interval: 5s
    static_configs:
      - targets: [&quot;localhost:9100&quot;]
</code></pre></div>
<p>Now we need to reboot the VPS:</p>
<div class="highlight"><pre><span></span><code>reboot
</code></pre></div>
<p>After the reboot we can revisit our Prometheus server at:</p>
<p><div class="highlight"><pre><span></span><code>http://<mark class="critic">SERVER_IP_ADDRESS</mark>/targets
</code></pre></div>
You should see the following in your browser:</p>
<p><img alt="img" src="../assets/node_exporter_01.png#center" /></p>
<h2 id="step-3-install-alert-manager"><strong>Step 3 - Install Alert Manager</strong></h2>
<p>In this section, let's configure the Alert Manager that notifies you if problems occour on your server. Alerts can be sent in Slack, Email, Matrix, or others. In this guide, we will configure an outage email alerting using Gmail.</p>
<p>First, download the latest binary of Alert Manager and unzip it by running the command below:</p>
<div class="highlight"><pre><span></span><code>wget https://github.com/prometheus/alertmanager/releases/download/v0.23.0/alertmanager-0.23.0.linux-amd64.tar.gz
tar xvfz alertmanager-*.*-amd64.tar.gz
mv alertmanager-*.*-amd64/alertmanager /usr/local/bin/
</code></pre></div>
<h3 id="gmail-setup"><strong>Gmail Setup</strong></h3>
<p>To allow Alert Manager to email you, you will need to generate something called an app password in your Gmail account. For details, click <a href="https://support.google.com/accounts/answer/185833?hl=en" target="_blank"> here</a> to follow the whole setup.</p>
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<p>Copy or save your app password! We need it soon.</p>
</div>
<h3 id="alert-manager-configuration"><strong>Alert Manager Configuration</strong></h3>
<p>We will now create a new folder for the Alert Manager's config file:</p>
<div class="highlight"><pre><span></span><code>mkdir /etc/alertmanager
</code></pre></div>
<p>Now need to create a new configuration file called <code>alertmanager.yml</code> under <code>/etc/alertmanager</code></p>
<p><div class="highlight"><pre><span></span><code>sudo nano /etc/alertmanager/alertmanager.yml
</code></pre></div>
and specify the file as follows:</p>
<div class="highlight"><pre><span></span><code>global:
 resolve_timeout: 1m

route:
 receiver: &#39;gmail-notifications&#39;

receivers:
- name: &#39;gmail-notifications&#39;
  email_configs:
  - to: <mark class="critic">YOUR_EMAIL</mark>
    from: <mark class="critic">YOUR_EMAIL</mark>
    smarthost: smtp.gmail.com:587
    auth_username: <mark class="critic">YOUR_EMAIL</mark>
    auth_identity: <mark class="critic">YOUR_EMAIL</mark>
    auth_password: <mark class="critic">YOUR_APP_PASSWORD</mark>
    send_resolved: true
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>With the above configuration, alerts will be sent using the email you set above. Remember to change <mark class="critic">YOUR_EMAIL</mark> to your email and paste the app password you just saved earlier to the <code>YOUR_APP_PASSWORD</code>.</p>
</div>
<p>Now we change the ownership to our Prometheus user:</p>
<p><div class="highlight"><pre><span></span><code>sudo chown -R prometheus:prometheus /etc/alertmanager
</code></pre></div>
Now let's open another port on our firewall for the Alert Manager:</p>
<div class="highlight"><pre><span></span><code>ufw allow 9093
</code></pre></div>
<p>Next, we will create another <code>systemd</code> file to make sure that the alert manager will start every time the server reboots:</p>
<div class="highlight"><pre><span></span><code>sudo nano /etc/systemd/system/alertmanager.service
</code></pre></div>
<div class="highlight"><pre><span></span><code>[Unit]
Description=AlertManager Server Service
Wants=network-online.target
After=network-online.target

[Service]
User=root
Group=root
Type=simple
ExecStart=/usr/local/bin/alertmanager --config.file /etc/alertmanager/alertmanager.yml --web.external-url=http://<mark class="critic">SERVER_IP</mark>:9093 --cluster.advertise-address=&#39;0.0.0.0:9093&#39;


[Install]
WantedBy=multi-user.target
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>SERVER_IP - Change it to your host IP address.</p>
</div>
<p>Finally, we can start the Alert Manager with the following command:
<div class="highlight"><pre><span></span><code>sudo systemctl daemon-reload &amp;&amp; sudo systemctl enable alertmanager &amp;&amp; sudo systemctl start alertmanager &amp;&amp; sudo systemctl status alertmanager
</code></pre></div></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You should see: Active: active (running)</p>
</div>
<div class="highlight"><pre><span></span><code>Created symlink /etc/systemd/system/multi-user.target.wants/alertmanager.service → /etc/systemd/system/alertmanager.service.
● alertmanager.service - AlertManager Server Service
     Loaded: loaded (/etc/systemd/system/alertmanager.service; enabled; vendor preset: enabled)
     <mark class="critic">Active: active (running)</mark> since Sun 2022-03-13 22:17:12 UTC; 12ms ago
   Main PID: 2484 (alertmanager)
      Tasks: 4 (limit: 9457)
     Memory: 948.0K
        CPU: 10ms
</code></pre></div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>For now that's it, but we will need to install a Grafana Plug-In later in this process but let's first install Grafana.
Hang on buddy we are done soon <img alt="🚀" class="twemoji" src="https://twemoji.maxcdn.com/v/latest/svg/1f680.svg" title=":rocket:" /></p>
</div>
<h2 id="step-4-install-grafana"><strong>Step 4 - Install Grafana</strong></h2>
<p>To visualize those metrics we will use Grafana. We run the following commands to install it:</p>
<div class="highlight"><pre><span></span><code>sudo apt-get install -y adduser libfontconfig1
wget https://dl.grafana.com/oss/release/grafana_8.4.3_amd64.deb
sudo dpkg -i grafana_8.4.3_amd64.deb
</code></pre></div>
<p>Now we will configure Grafana to autostart as well</p>
<div class="highlight"><pre><span></span><code>sudo systemctl daemon-reload
sudo systemctl enable grafana-server
sudo systemctl start grafana-server
</code></pre></div>
<div class="highlight"><pre><span></span><code>ufw allow 3000
</code></pre></div>
<p>Before we start to wire everything together, let's take care of the aforementioned alert manager plugin. It will help you to monitor the alert information. To install it, execute the command below:</p>
<div class="highlight"><pre><span></span><code>sudo grafana-cli plugins install camptocamp-prometheus-alertmanager-datasource
</code></pre></div>
<p>and restart Grafana:</p>
<div class="highlight"><pre><span></span><code>sudo systemctl restart grafana-server
</code></pre></div>
<p>Now we can access Grafana by going to <code>http://</code><mark class="critic">SERVER_IP_ADDRESS</mark>:3000/login`. The default user and password is admin/admin.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you want to change the port on which Grafana runs (3000 is a popular port), edit the file <code>/usr/share/grafana/conf/defaults.ini</code> with a command like <code>sudo vim /usr/share/grafana/conf/defaults.ini</code> and change the <code>http_port</code> value to something else. Then restart grafana with <code>sudo systemctl restart grafana-server</code>.</p>
</div>
<p><img alt="img" src="../assets/grafana_01.png#center" /></p>
<div class="admonition success">
<p class="admonition-title">Success</p>
<p>We successfully installed and configured Prometheus, Node Exporter, Alert Manager and Grafana at this point <img alt="❤" class="twemoji" src="https://twemoji.maxcdn.com/v/latest/svg/2764.svg" title=":heart:" /></p>
</div>
<h3 id="lets-us-wire-it-all-together"><strong>Let's us wire it all together</strong></h3>
<p>Now that everything is running we need to connect our Prometheus and alert manager data source to our Grafana server. We do this in the UI of Grafana by going to <code>Data Sources</code></p>
<p><img alt="img" src="../assets/grafana_02.png#center" /></p>
<p><img alt="img" src="../assets/grafana_03.png#center" /></p>
<p><img alt="img" src="../assets/grafana_04.png#center" /></p>
<p>The only thing we need to input is the URL that is <code>https://localhost:9090</code> and then click Save &amp; Test. If you see Data source is working, your connection is configured correctly.</p>
<p><img alt="img" src="../assets/grafana_05.png#center" /></p>
<p><img alt="img" src="../assets/grafana_06.png#center" /></p>
<div class="admonition success">
<p class="admonition-title">Success</p>
<p>We connected our Prometheus database with Grafana!</p>
</div>
<p>Now let's wire the Alert Manager similarly:</p>
<p><img alt="img" src="../assets/grafana_10.png#center" /></p>
<p><img alt="img" src="../assets/grafana_11.png#center" /></p>
<h3 id="lets-use-our-zukma-template-dashboard"><strong>Let's use our Zukma Template Dashboard</strong></h3>
<p>For this guide we will use a customized Zukma Dashboard to monitor our node, but you can always start to customize or create your own Dashboards. </p>
<p><img alt="img" src="../assets/grafana_07.png#center" /></p>
<p><img alt="img" src="../assets/grafana_08.png#center" /></p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>You can get the import code here: <a href="https://grafana.com/grafana/dashboards/15891" target="_blank"> Grafana Labs</a>.  May also consider to give it a review <img alt="😄" class="twemoji" src="https://twemoji.maxcdn.com/v/latest/svg/1f604.svg" title=":smile:" /></p>
</div>
<p><img alt="img" src="../assets/grafana_09.png#center" /></p>
<div class="admonition success">
<p class="admonition-title">Success</p>
<p>There you go mate <img alt="🔥" class="twemoji" src="https://twemoji.maxcdn.com/v/latest/svg/1f525.svg" title=":fire:" /> <img alt="🚀" class="twemoji" src="https://twemoji.maxcdn.com/v/latest/svg/1f680.svg" title=":rocket:" /></p>
</div>
<p><br></br></p>
<p align=right> Written by Zukma Team </p>





              
            </article>
            
          </div>
        </div>
        
          <a href="#" class="md-top md-icon" data-md-component="top" hidden>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
            Back to top
          </a>
        
      </main>
      
        
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright © 2022 Zukma
          </div>
        
        Made for
        <a href="https://www.zukma.org/" target="_blank" rel="noopener">
          Zukma
        </a>
        
      </div>
      
    </div>
  </div>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["content.code.annotate", "navigation.instant", "navigation.tracking", "navigation.tabs", "navigation.indexes", "navigation.top", "toc.integrate"], "search": "../../assets/javascripts/workers/search.ecf98df9.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.2ab50757.min.js"></script>
      
        <script src="../../javascripts/mathjax.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>